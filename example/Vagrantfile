Vagrant.configure(2) do |config|
  config.vm.box = 'esxi-6.7-amd64'
  config.vm.hostname = 'example.test'

  config.vm.provider 'libvirt' do |lv, config|
    lv.memory = 4096
    lv.cpus = 4
  end

  # NB you must use `privileged: false` because esxi does not
  #    have `sudo` and, by default, you are already executing
  #    commands as root.
  config.vm.provision 'shell', inline: 'esxcli system version get', privileged: false
end
